language: node_js
node_js:
  - 12
services:
  - postgresql
addons:
  postgresql: '10'
dist: xenial
notifications:
  email:
    on_success: change
    on_failure: always
install:
  - npm ci
before_script:
  - psql -c 'create database "gracebopper-test";' -U postgres
script:
  - npm test
  - npm run build-client
before_deploy:
  - rm -rf node_modules
deploy:
  skip_cleanup: true
  provider: heroku
  app: gracebopper
  api_key:
    secure: 'qsZQMU2YecrcuFgp0GJNLXofB4Ev9i0+rG8teN8Fke96DkGC9UXMlU1epG8eZyJMm9CTVCPgLU4P1Zfv1a7u7PCr7dVo9bVIWt/QEUX4fNmiyaIKxFFXtPXRv3ybI0nqihHLJOCE8JwgjL5yE82YqOJV4tUIqXB49vAypabOZefEbWBv1Mmv3aKBpSLDWxFL5NRizbmoifhGTJ66bGLPeH8MPgov5mOwdpN13P6EDtqKjst4j4yJlTULVlL0f7aR2lt16V2pbnlTbj+G4njC72O7XFkNQo3xo8MIGlVBIASBczoix2dJ0Rva+IviGeyqS+zK3m4VGtqKhoBVvuxd6coA4Q3eevCMiKuIA1hrMDbJ5uKDXLNe5VLdqHYC64RZZWyWl36e3Dn4M9uDZAuy6tPAMIH4Ze0QM9kNNV6AZkKvdJpJ1XInAsTx8reu+gyM4jqyG4xWC016QBRTc2jdxkDkl/qlT0ok7QHccbMgEIXlaUybgqdfV/x/JIiURfnG9atU684tVbeJ4je91N+LHPmtG9Mu1INt9tUOBNukbR4nMIbwJEUw4GFqw55K8dW0Qw4fYdMV9O5pYcbu45xxZgFRptXbY12F0Srec2bTsx1PJ0QQ0+V3lH5XLPXG4PZz8YntblxThg012MKHoFYQ9S1GFJpHpiyBlx6IxlVmS4M='
